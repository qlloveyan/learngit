<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>欢迎使用天地图</title>
<!-- 引入script服务 -->
<script src=" http://api.tianditu.com/js/maps.js" type="text/javascript"></script>
<script type="text/javascript">
	
	var map,zoom = 12;
	//初始化map
	function loadMap(){
    	var config = {
            projection: "EPSG:4326"
        }
        //初始化地图对象
        map=new TMap("mapDiv",config);
//         map=new TMap("mapDiv");
        //设置显示地图的中心点和级别
        map.centerAndZoom(new TLngLat(116.40969,39.89945),zoom);

	}
	
	//切换投影方式
	function switchingMaps()
    {
        var obj = document.getElementById("projectionMap");
        var index = obj.selectedIndex;
        var text = obj.options[index].text;
        if(map.getCode() == text) return;
            map.switchingMaps(text);
   	}

	//鼠标滚轮放大缩小地图
	var scrollFunc = function(e) {
        e = e || window.event;
        if (e.wheelDelta) {  //判断浏览器IE，谷歌滑轮事件             
            if (e.wheelDelta > 0) { //当滑轮向上滚动时
//                 alert("滑轮向上滚动");
            	//放大地图
            	map.zoomIn();
            }
            if (e.wheelDelta < 0) { //当滑轮向下滚动时
//                 alert("滑轮向下滚动");
            	//缩小地图
            	map.zoomOut();
            }
        } else if (e.detail) {  //Firefox滑轮事件
            if (e.detail> 0) { //当滑轮向上滚动时
//                 alert("滑轮向上滚动");
            	//放大地图
            	map.zoomIn();
            }
            if (e.detail< 0) { //当滑轮向下滚动时
//                 alert("滑轮向下滚动");
            	//缩小地图
            	map.zoomOut();
            }
        }
    }
    //给页面绑定滑轮滚动事件
    if (document.addEventListener) {
        document.addEventListener('DOMMouseScroll', scrollFunc, false);
    }
    //滚动滑轮触发scrollFunc方法
    window.onmousewheel = document.onmousewheel = scrollFunc; 
    
    //地图平移至指定位置
    function moveTo(){
    	//界面自动平移方法：panTo
        map.panTo(new TLngLat(116.64899,40.12948));
    }
</script>
</head>
<body onload="loadMap()">
	<div style="width:100%; height:100%">
		<!-- 操作栏 -->
		<div style="position:absolute;width:20%; height:100%">
			<!-- 切换地图投影方式 -->
			<div>
				<select id="projectionMap">
		            <option>EPSG:900913</option>
		            <option>EPSG:4326</option>
		        </select>
		        <input type="button" onclick="switchingMaps()" value="切换方式"/>
			</div>
			
			<div>
				<input type="button" value="平移" onclick="moveTo()"/>
			</div>
			
			<div>
			</div>
		</div>
		<!-- 定义map容器 -->
		<div id="mapDiv" style="position:absolute;width:80%; height:100%;left: 20%;">
		
		</div>
	</div>
</body>
</html>